<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Create a new docsâ€‘repo</title>
</head>
<body>
  <h1>ðŸ“¦ New Documentation Repository</h1>
  <form id="newRepoForm">
    <label>
      Repository name:
      <input type="text" id="repoName" required placeholder="myâ€‘awesomeâ€‘docs"/>
    </label>
    <button type="submit">Create & Edit Docs</button>
  </form>
  <script>
    document.getElementById('newRepoForm').onsubmit = async e => {
      e.preventDefault();
      const name = document.getElementById('repoName').value;
      // call our Netlify Function
      const res = await fetch('/.netlify/functions/createâ€‘repo', {
        method: 'POST',
        body: JSON.stringify({ name }),
      });
      const { org, repo } = await res.json();
      // now redirect into the CMS admin, passing org/repo
      window.location.href = `/admin/index.html?org=${org}&repo=${repo}`;
    };
  </script>
</body>
</html>
